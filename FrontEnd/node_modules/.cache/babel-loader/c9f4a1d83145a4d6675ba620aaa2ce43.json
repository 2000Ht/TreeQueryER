{"remainingRequest":"/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main/FrontEnd/node_modules/babel-loader/lib/index.js!/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main/FrontEnd/node_modules/eslint-loader/index.js??ref--13-0!/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main/FrontEnd/src/tooltip.js","dependencies":[{"path":"/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main/FrontEnd/src/tooltip.js","mtime":1670057938737},{"path":"/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1660192275271},{"path":"/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main/FrontEnd/node_modules/babel-loader/lib/index.js","mtime":1660192275351},{"path":"/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main/FrontEnd/node_modules/eslint-loader/index.js","mtime":1660192275000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport * as d3 from \"d3\"; //添加tooltip\n\nd3.helper = {};\n\nd3.helper.tooltip = function (treesvgid) {\n  var left = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n  var top = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n  var tooltipDiv;\n  var bodyNode = d3.select('body').node();\n\n  function tooltip(selection) {\n    selection.on('mouseover.tooltip', function (pD, pI) {\n      var absoluteMousePos = d3.mouse(bodyNode); // Clean up lost tooltips\n\n      d3.select('#' + treesvgid).select('#g-level-1').selectAll('.tooltip').remove(); // Append tooltip\n\n      if (treesvgid == 'node-link-tree') {\n        tooltipDiv = d3.select('#' + treesvgid).select('#g-level-1').append('g').attr('class', 'tooltip'); // .attr(\"transform\", `translate(${pD.x + 6},${pD.y - 10})`)\n      }\n\n      var indexCount = 0;\n      var name = \"name\";\n      var show_list = []; //show_list.push({name:pD.data.name, index:0})\n      // console.log(Object.keys(pD.data.data))\n      //Object.keys(pD.data.data).forEach(d=>{show_list.push({name:d, index:indexCount+1}); indexCount += 1;})\n      // console.log(show_list)\n\n      Object.keys(pD.data).forEach(function (d) {\n        if (d != 'children' && d != 'abstract' && d != 'refList' && d != 'affiliation') {\n          show_list.push({\n            name: d,\n            index: indexCount\n          });\n          indexCount += 1;\n        }\n      });\n      tooltipDiv.append('g').attr('id', 'text-g1').selectAll('text').data(show_list).join(function (enter) {\n        return enter.append('text').attr(\"font-family\", \"sans-serif\").attr(\"font-size\", '0.5em').attr(\"text-anchor\", \"start\").append('tspan').attr(\"dy\", function (d) {\n          return \"\".concat(10 + 15 * d.index);\n        }).attr(\"dx\", 10).attr(\"fill\", \"#d6d4d4\").text(function (d) {\n          return \"\".concat(d.name, \" : \").concat(pD.data[d.name]);\n        });\n      });\n      tooltipDiv.append('rect').attr(\"class\", \"treevis-tooltip-rect\").attr('height', 15 * show_list.length).attr('width', function () {\n        return document.getElementById(\"text-g1\").getBoundingClientRect()['width'] + 20;\n      }).attr('rx', 5).attr('ry', 5).attr('stroke', 'black').attr('stroke-width', 1).attr('stroke-opacity', 0.1).attr('fill', '#464545');\n      tooltipDiv.append('g').attr('id', 'text-g2').selectAll('text').data(show_list).join(function (enter) {\n        return enter.append('text').attr(\"font-family\", \"sans-serif\").attr(\"font-size\", '0.5em').attr(\"text-anchor\", \"start\").append('tspan').attr(\"dy\", function (d) {\n          return \"\".concat(10 + 15 * d.index);\n        }).attr(\"dx\", 10).attr(\"fill\", \"#d6d4d4\").text(function (d) {\n          return \"\".concat(d.name, \" : \").concat(pD.data[d.name]);\n        });\n      });\n      var outWidth = document.getElementById(\"node-link-tree\").getBoundingClientRect()['width'] - 10;\n      var outHeight = document.getElementById(\"node-link-tree\").getBoundingClientRect()['height'] - 10;\n      var tmpWidth = document.getElementById(\"text-g1\").getBoundingClientRect()['width'] + 20;\n      var tmpHeight = 15 * show_list.length;\n      var tmpX = 0;\n      var tmpY = 0;\n\n      if (pD.x - tmpWidth / 2 < 0) {\n        tmpX = 10; // tooltipDiv.attr(\"transform\", `translate(${10},${pD.y + 10})`)\n      } else if (pD.x + tmpWidth / 2 > outWidth) {\n        tmpX = outWidth - tmpWidth; // tooltipDiv.attr(\"transform\", `translate(${outWidth-tmpWidth},${pD.y + 10})`)\n      } else {\n        tmpX = pD.x - tmpWidth / 2; // tooltipDiv.attr(\"transform\", `translate(${pD.x - tmpWidth/2},${pD.y + 10})`)\n      }\n\n      if (pD.y + 10 + tmpHeight > outHeight) {\n        if (pD.y - 10 - tmpHeight > 0) {\n          tmpY = pD.y - 10 - tmpHeight;\n        } else if (pD.y + 10 - outHeight - (tmpHeight + 10 - pD.y) > 0) {\n          tmpY = pD.y - 10 - tmpHeight;\n        } else {\n          tmpY = pD.y + 10;\n        }\n      } else {\n        tmpY = pD.y + 10;\n      }\n\n      tooltipDiv.attr(\"transform\", \"translate(\".concat(tmpX, \",\").concat(tmpY, \")\"));\n    }).on('mousemove.tooltip', function (pD, pI) {}).on('mouseout.tooltip', function (pD, pI) {\n      // Remove tooltip\n      tooltipDiv.remove();\n    });\n  }\n\n  tooltip.attr = function (_x) {\n    if (!arguments.length) return attrs;\n    attrs = _x;\n    return this;\n  };\n\n  tooltip.style = function (_x) {\n    if (!arguments.length) return styles;\n    styles = _x;\n    return this;\n  };\n\n  return tooltip;\n};\n\nexport default {\n  install: function install(Vue) {\n    Vue.prototype.tooltip_ele = function (param1, param2, param3) {\n      return d3.helper.tooltip(param1, param2, param3);\n    };\n  }\n};",{"version":3,"sources":["/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main/FrontEnd/src/tooltip.js"],"names":["d3","helper","tooltip","treesvgid","left","top","tooltipDiv","bodyNode","select","node","selection","on","pD","pI","absoluteMousePos","mouse","selectAll","remove","append","attr","indexCount","name","show_list","Object","keys","data","forEach","d","push","index","join","enter","text","length","document","getElementById","getBoundingClientRect","outWidth","outHeight","tmpWidth","tmpHeight","tmpX","tmpY","x","y","_x","arguments","attrs","style","styles","install","Vue","prototype","tooltip_ele","param1","param2","param3"],"mappings":"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","sourcesContent":["\nimport * as d3 from \"d3\"\n//添加tooltip\nd3.helper = {};\n\nd3.helper.tooltip = function(treesvgid, left=10, top=10){\n    let tooltipDiv;\n    let bodyNode = d3.select('body').node();\n    function tooltip(selection){\n      selection.on('mouseover.tooltip', function(pD, pI){\n        let absoluteMousePos = d3.mouse(bodyNode);\n        // Clean up lost tooltips\n        d3.select('#'+treesvgid)\n          .select('#g-level-1')\n          .selectAll('.tooltip').remove();\n        // Append tooltip\n        if(treesvgid == 'node-link-tree'){\n          tooltipDiv = d3.select('#'+treesvgid)\n          .select('#g-level-1')\n          .append('g')\n            .attr('class', 'tooltip')\n            // .attr(\"transform\", `translate(${pD.x + 6},${pD.y - 10})`)\n        }\n\n        let indexCount = 0\n        let name = \"name\"\n        let show_list = []\n        //show_list.push({name:pD.data.name, index:0})\n        // console.log(Object.keys(pD.data.data))\n        //Object.keys(pD.data.data).forEach(d=>{show_list.push({name:d, index:indexCount+1}); indexCount += 1;})\n        // console.log(show_list)\n        Object.keys(pD.data).forEach(d=>{\n          if(d !='children' && d != 'abstract' && d != 'refList' && d!='affiliation'){\n            show_list.push({name:d, index:indexCount}); indexCount += 1;\n          }\n            \n        })\n        tooltipDiv.append('g')\n        .attr('id', 'text-g1')\n        .selectAll('text')\n          .data(show_list)\n          .join(\n            enter => enter.append('text')\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"font-size\", '0.5em')\n            .attr(\"text-anchor\", \"start\")\n            \n          .append('tspan')\n\n            .attr(\"dy\",d=>`${10 + 15 * d.index}`)\n            .attr(\"dx\", 10)\n            .attr(\"fill\",\"#d6d4d4\")\n            .text(d=>`${d.name} : ${pD.data[d.name]}`)\n          )\n\n        tooltipDiv.append('rect')\n        .attr(\"class\", \"treevis-tooltip-rect\")\n        .attr('height', 15 * show_list.length) \n        .attr('width', function(){\n          return document.getElementById(\"text-g1\").getBoundingClientRect()['width']+20\n        })\n        .attr('rx',5)\n        .attr('ry',5)\n        .attr('stroke', 'black')\n        .attr('stroke-width', 1)\n        .attr('stroke-opacity', 0.1)\n        .attr('fill', '#464545')\n        \n        tooltipDiv.append('g')\n        .attr('id', 'text-g2')\n        .selectAll('text')\n          .data(show_list)\n          .join(\n            enter => enter.append('text')\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"font-size\", '0.5em')\n            .attr(\"text-anchor\", \"start\")\n            \n          .append('tspan')\n\n            .attr(\"dy\",d=>`${10 + 15 * d.index}`)\n            .attr(\"dx\", 10)\n            .attr(\"fill\",\"#d6d4d4\")\n            .text(d=>`${d.name} : ${pD.data[d.name]}`)\n          )\n          let outWidth = document.getElementById(\"node-link-tree\").getBoundingClientRect()['width'] - 10\n          let outHeight = document.getElementById(\"node-link-tree\").getBoundingClientRect()['height'] - 10\n          let tmpWidth = document.getElementById(\"text-g1\").getBoundingClientRect()['width']+20\n          let tmpHeight = 15 * show_list.length\n          let tmpX = 0\n          let tmpY = 0\n          if(pD.x - tmpWidth/2 < 0){\n            tmpX = 10\n            // tooltipDiv.attr(\"transform\", `translate(${10},${pD.y + 10})`)\n          }\n          else if(pD.x + tmpWidth/2 > outWidth){\n            tmpX = outWidth-tmpWidth\n            // tooltipDiv.attr(\"transform\", `translate(${outWidth-tmpWidth},${pD.y + 10})`)\n          }\n          else{\n            tmpX = pD.x - tmpWidth/2\n            // tooltipDiv.attr(\"transform\", `translate(${pD.x - tmpWidth/2},${pD.y + 10})`)\n          }\n\n          if(pD.y + 10 + tmpHeight > outHeight){\n            if(pD.y - 10 - tmpHeight > 0){\n              tmpY = pD.y - 10 - tmpHeight\n            }\n            else if(pD.y + 10 - outHeight - (tmpHeight + 10 - pD.y) > 0){\n              tmpY = pD.y - 10 - tmpHeight\n            }\n            else{\n              tmpY = pD.y + 10\n            }\n          }\n          else{\n            tmpY = pD.y + 10\n          }\n          tooltipDiv.attr(\"transform\", `translate(${tmpX},${tmpY})`)\n         \n\n\n        \n                  \n\n\n      })\n      .on('mousemove.tooltip', function(pD, pI){\n\n      })\n      .on('mouseout.tooltip', function(pD, pI){\n        // Remove tooltip\n        tooltipDiv.remove();\n      });\n    }\n    tooltip.attr = function(_x){\n      if (!arguments.length) return attrs;\n      attrs = _x;\n      return this;\n    };\n    tooltip.style = function(_x){\n      if (!arguments.length) return styles;\n      styles = _x;\n      return this;\n    };\n    return tooltip;\n};\n\nexport default{\n    install: function(Vue){\n      Vue.prototype.tooltip_ele = (param1, param2, param3) =>d3.helper.tooltip(param1, param2, param3)\n    }\n}"]}]}