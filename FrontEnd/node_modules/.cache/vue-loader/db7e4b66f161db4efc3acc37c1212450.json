{"remainingRequest":"/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main-sumbit/FrontEnd/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main-sumbit/FrontEnd/src/views/OverviewPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main-sumbit/FrontEnd/src/views/OverviewPanel.vue","mtime":1700547442151},{"path":"/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main-sumbit/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1660192275271},{"path":"/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main-sumbit/FrontEnd/node_modules/babel-loader/lib/index.js","mtime":1660192275351},{"path":"/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main-sumbit/FrontEnd/node_modules/cache-loader/dist/cjs.js","mtime":1660192275271},{"path":"/Users/ht.mi/个人资料/研究生资料/个人论文/tree_visual_query/RETree-main-sumbit/FrontEnd/node_modules/vue-loader/lib/index.js","mtime":1660192275522}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState, mapMutations } from 'vuex';\n\n\nexport default {\n  name: 'OverviewPanel',\n  components: {\n\n  },\n  props: {\n\n  },\n  data() {\n    return {\n      frontPoint: null,\n      selectValue: \"Citation\",\n      options:[\n        {\n          value: \"Citation\"\n        },\n        {\n          value: \"Repost\"\n        }\n      ],\n      condition_data: null,\n\n      \n    }\n  },\n  beforeMount(){\n    this.condition_data = sysDatasetObj.getCondition()\n\n  },\n  mounted() {\n    this.width = this.$refs.projectionPanel.clientWidth\n    this.height = this.$refs.projectionPanel.clientHeight\n    this.draw_projection_chart()\n    this.draw_size_bar()\n    this.draw_height_bar()\n    this.draw_width_bar()\n    \n  },\n  watch: {\n      displayMode: function() {\n        console.log('displayMode')\n      },\n      visPanelState: function(){\n        d3.select('#bar-size-1').remove()\n        d3.select('#bar-height-1').remove()\n        d3.select('#bar-width-1').remove()\n        this.draw_size_bar()\n        this.draw_height_bar()\n        this.draw_width_bar()\n      }\n  },\n  computed: {\n    ...mapState([\n      'visPanelState'\n    ]),\n  },\n  created(){\n\n  },\n  methods: {\n    ...mapMutations([\n      'DATA_QUERY_INDEX'\n    ]),\n    test: function(){\n        var x = d3.scaleLinear()\n            .domain([0,1])\n            .range([0,500]);\n          var x2 = x.copy(); // reference.\n\n          var zoom = d3.zoom()\n            .scaleExtent([1, 10])\n            .on(\"zoom\", zoomed);\n\n          var svg = d3.select(\"svg\")\n            .call(zoom);\n            \n          var axis = d3.axisBottom().scale(x)\n            \n          var axisG = svg.append(\"g\")\n              .attr(\"transform\", \"translate(0,30)\")\n              .call(axis);\n            \n          function zoomed() {\n            x = d3.event.transform.rescaleX(x2)\n            axis.scale(x);\n            axisG.call(axis);\n          }\n    },\n    draw_projection_chart: function(){\n      let self = this\n      d3.csv('treeDataset/umap_GIN10_res.csv', d3.autoType)\n        .then(function(data) {\n          var margin = { top: 5, right: 5, bottom: 5, left: 5 },\n              width = self.$refs.projectionPanel.clientWidth - margin.left - margin.right,\n              height = self.$refs.projectionPanel.clientHeight - margin.top - margin.bottom;\n\n          var x = d3.scaleLinear()\n            .range([0, width]).nice();\n          var y = d3.scaleLinear()\n            .range([height, 0]).nice();\n          \n\n          var xMax = d3.max(data, function(d) { return d['x']; }) * 1.05,\n              xMin = d3.min(data, function(d) { return d['x']; }),\n              xMin = xMin > 0 ? 0 : xMin,\n              yMax = d3.max(data, function(d) { return d['y']; }) * 1.05,\n              yMin = d3.min(data, function(d) { return d['y']; }),\n              yMin = yMin > 0 ? 0 : yMin;\n          x.domain([xMin-2, xMax+2]);\n          y.domain([yMin-2, yMax+1]);\n\n          var xAxis = d3.axisBottom()\n              .scale(x)\n              .ticks(8)\n              .tickSize(-height);\n\n          var yAxis = d3.axisLeft()\n              .scale(y)\n              .ticks(8)\n              .tickSize(-width);\n\n\n          var zoomBeh = d3.zoom()\n            .scaleExtent([0, 50])\n            .on(\"zoom\", zoom);\n          \n          var svg = d3.select(self.$el).select('#projection-chart')\n            .append(\"g\")\n            .attr('id', 'distribute-chart')\n            .attr(\"transform\", \"translate(5, 5)\")\n            .call(zoomBeh);\n          \n          svg.append(\"rect\")\n            .attr(\"class\", \"overview-rect\")\n            .attr(\"width\", width)\n            .attr(\"height\", height);\n          \n          var xAxisG = svg.append(\"g\")\n            .classed(\"x axis\", true)\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis)\n          \n          var yAxisG = svg.append(\"g\")\n            .classed(\"y axis\", true)\n            .call(yAxis)\n          \n          var objects = svg.append(\"svg\")\n            .attr(\"class\", \"overview-svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height);\n\n          objects.append(\"svg:line\")\n              .classed(\"axisLine hAxisLine\", true)\n              .attr(\"x1\", 0)\n              .attr(\"y1\", 0)\n              .attr(\"x2\", width)\n              .attr(\"y2\", 0)\n              .attr(\"transform\", \"translate(0,\" + height + \")\");\n          \n          objects.append(\"svg:line\")\n            .classed(\"axisLine vAxisLine\", true)\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", height);\n          \n          var rMax = d3.max(data, function(d) { return d['n']; }),\n            rMin = d3.min(data, function(d) { return d['n']; });\n\n          let logScale = d3.scaleLog()\n            .domain([rMin, rMax])\n            .range([3, 10]);\n\n          objects.selectAll(\".dot\")\n            .data(data)\n          .enter()\n          .append(\"circle\")\n            .attr(\"class\",\"dot\")\n            .attr(\"id\", function(d) { return \"dot\"+parseInt(d['m'])})\n            .classed(\"dot-selected\", false)\n            .classed(\"dot-highlighted\", false)\n            .attr(\"transform\", transform)\n            .attr(\"m\", function(d) {return d['m']})\n            .attr(\"r\", function(d){\n              return logScale(d['n']);\n            })\n            .on('click', function(){\n                self.DATA_QUERY_INDEX(parseInt(this.getAttribute(\"m\")))\n            });\n          \n          function zoom() {\n            let transformEvent = d3.event.transform\n            svg.selectAll(\".dot\")\n                .attr(\"transform\", d => transform(d, transformEvent));\n          }\n\n          function transform(d, transformEvent) {\n            let poxList = [x(d['x']), y(d['y'])]\n            if (typeof(transformEvent) !== 'object') {\n              return \"translate(\" + poxList[0] + \",\" + poxList[1] + \")\";\n            }\n            let posListUpdate = transformEvent.apply(poxList)\n            return \"translate(\" + posListUpdate[0] + \",\" + posListUpdate[1] + \")\";\n          }\n        })\n\n    },\n    draw_size_bar: function(){\n      var self = this\n      d3.csv('treeDataset/size.csv', d3.autoType)\n        .then(function(data) {\n            var margin = {top: 10, right: 10, bottom: 50, left: 35},\n              width = document.getElementById(\"bar-size\").clientWidth - margin.left - margin.right,\n              height = document.getElementById(\"bar-size\").clientHeight - margin.top - margin.bottom;\n\n            var highlightData = sysDatasetObj.gethighlightBar()\n            var highlightFlag = false\n            if('size' in highlightData){\n              highlightData = highlightData['size']\n              highlightFlag = true\n            }\n\n\n            var svg = d3.select(self.$el).select(\"#bar-size\")\n                .append(\"g\")\n                .attr(\"id\", 'bar-size-1')\n                .attr(\"transform\",\n                      \"translate(\" + margin.left + \", \" +  margin.right + \")\");\n            \n            svg.append(\"text\")\n              .style(\"text-anchor\", \"middle\")\n              .attr(\"x\", width-20)\n              .attr(\"y\", 12)\n              .attr(\"font-size\", \"15px\")\n              .attr(\"font-weight\", \"bolder\")\n              .attr(\"fill\", \"#666666\")\n              .text(\"Size\");\n\n            var x = d3.scaleBand()\n              .range([ 0, width ])\n              .domain(data.map(function(d) { return d.x; }))\n              .padding(0.2);\n            svg.append(\"g\")\n              .attr(\"class\", \"x-axis\")\n              .attr(\"transform\", \"translate(0,\" + height + \")\")\n              .call(d3.axisBottom(x))\n              .selectAll(\"text\")\n                .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n                .style(\"text-anchor\", \"end\");\n\n            // Add Y axis\n            var y = d3.scaleLinear()\n              .domain([0, 1200])\n              .range([ height, 0]);\n\n            svg.append(\"g\")\n              .call(d3.axisLeft(y).ticks(4));\n\n            // Bars\n            svg.selectAll(\"mybar\")\n              .data(data)\n              .enter()\n              .append(\"rect\")\n                .attr(\"x\", function(d) { return x(d.x); })\n                .attr(\"y\", function(d) { return y(d.y); })\n                .attr(\"width\", x.bandwidth())\n                .attr(\"height\", function(d) { return height - y(d.y); })\n                .attr(\"fill\", \"#CCCCCC\")   \n\n            if(highlightFlag){\n              svg.selectAll(\"highlightBar\")\n              .data(highlightData)\n              .enter()\n              .append(\"rect\")\n                .attr(\"x\", function(d) { return x(d.x); })\n                .attr(\"y\", function(d) { return y(d.y); })\n                .attr(\"width\", x.bandwidth())\n                .attr(\"height\", function(d) { return height - y(d.y); })\n                .attr(\"fill\", \"orange\")   \n            }\n\n\n            svg.append(\"g\")\n            .selectAll(\"g\")\n            .data(data)\n            .enter()\n            .append('text')\n            .attr(\"class\", \"tree-name\")\n            .attr(\"x\", function(d) { return x(d.x); })\n            .attr(\"y\", function(d) { return y(d.y); })\n            .attr(\"dx\", \"10\")\n            .attr(\"dy\", '-1')\n            .attr(\"text-anchor\", \"middle\")\n            .text(function(d){return d.y;\n            })\n            .attr('font-size', \"10px\")\n            .attr('fill', '#808080');\n              \n        })\n    },\n    draw_height_bar: function(){\n      var self = this\n      d3.csv('treeDataset/height.csv', d3.autoType)\n        .then(function(data) {\n            var margin = {top: 10, right: 10, bottom: 50, left: 35},\n              width = document.getElementById(\"bar-height\").clientWidth - margin.left - margin.right,\n              height = document.getElementById(\"bar-height\").clientHeight - margin.top - margin.bottom;\n\n            // append the svg object to the body of the page\n            var svg = d3.select(self.$el).select(\"#bar-height\")\n                .append(\"g\")\n                .attr(\"id\", 'bar-height-1')\n                .attr(\"transform\",\n                      \"translate(\" + margin.left + \", \" +  margin.right + \")\");\n\n            var highlightData = sysDatasetObj.gethighlightBar()\n            var highlightFlag = false\n            if('height' in highlightData){\n              highlightData = highlightData['height']\n              highlightFlag = true\n            }\n            \n            svg.append(\"text\")\n              .style(\"text-anchor\", \"middle\")\n              .attr(\"x\", width-20)\n              .attr(\"y\", 12)\n              .attr(\"font-size\", \"15px\")\n              .attr(\"font-weight\", \"bolder\")\n              .attr(\"fill\", \"#666666\")\n              .text(\"Height\");\n\n            var x = d3.scaleBand()\n              .range([ 0, width ])\n              .domain(data.map(function(d) { return d.x; }))\n              .padding(0.2);\n            svg.append(\"g\")\n              .attr(\"class\", \"x-axis\")\n              .attr(\"transform\", \"translate(0,\" + height + \")\")\n              .call(d3.axisBottom(x))\n              .selectAll(\"text\")\n                .attr(\"transform\", \"translate(0,0)\")\n                .style(\"text-anchor\", \"middle\");\n\n            // Add Y axis\n            var y = d3.scaleLinear()\n              .domain([0, 1200])\n              .range([ height, 0]);\n\n            svg.append(\"g\")\n              .call(d3.axisLeft(y).ticks(4));\n\n            // Bars\n            svg.selectAll(\"mybar\")\n              .data(data)\n              .enter()\n              .append(\"rect\")\n                .attr(\"x\", function(d) { return x(d.x); })\n                .attr(\"y\", function(d) { return y(d.y); })\n                .attr(\"width\", x.bandwidth())\n                .attr(\"height\", function(d) { return height - y(d.y); })\n                .attr(\"fill\", \"#CCCCCC\")\n            \n            if(highlightFlag){\n              svg.selectAll(\"highlightBar\")\n              .data(highlightData)\n              .enter()\n              .append(\"rect\")\n                .attr(\"x\", function(d) { return x(d.x); })\n                .attr(\"y\", function(d) { return y(d.y); })\n                .attr(\"width\", x.bandwidth())\n                .attr(\"height\", function(d) { return height - y(d.y); })\n                .attr(\"fill\", \"orange\")   \n            }\n\n            svg.append(\"g\")\n            .selectAll(\"g\")\n            .data(data)\n            .enter()\n            .append('text')\n            .attr(\"class\", \"tree-name\")\n            .attr(\"x\", function(d) { return x(d.x); })\n            .attr(\"y\", function(d) { return y(d.y); })\n            .attr(\"dx\", \"10\")\n            .attr(\"dy\", '-1')\n            .attr(\"text-anchor\", \"middle\")\n            .text(function(d){return d.y;\n            })\n            .attr('font-size', \"10px\")\n            .attr('fill', '#808080');\n              \n        })\n    },\n    draw_width_bar: function(){\n      var self = this\n      d3.csv('treeDataset/width.csv', d3.autoType)\n        .then(function(data) {\n            var margin = {top: 10, right: 10, bottom: 50, left: 35},\n              width = document.getElementById(\"bar-width\").clientWidth - margin.left - margin.right,\n              height = document.getElementById(\"bar-width\").clientHeight - margin.top - margin.bottom;\n\n            // append the svg object to the body of the page\n            var svg = d3.select(self.$el).select(\"#bar-width\")\n                .append(\"g\")\n                .attr(\"id\", 'bar-width-1')\n                .attr(\"transform\",\n                      \"translate(\" + margin.left + \", \" +  margin.right + \")\");\n            \n            var highlightData = sysDatasetObj.gethighlightBar()\n            var highlightFlag = false\n            if('width' in highlightData){\n              highlightData = highlightData['width']\n              highlightFlag = true\n            }\n\n            svg.append(\"text\")\n              .style(\"text-anchor\", \"middle\")\n              .attr(\"x\", width-20)\n              .attr(\"y\", 12)\n              .attr(\"font-size\", \"15px\")\n              .attr(\"font-weight\", \"bolder\")\n              .attr(\"fill\", \"#666666\")\n              .text(\"Width\");\n\n            var x = d3.scaleBand()\n              .range([ 0, width ])\n              .domain(data.map(function(d) { return d.x; }))\n              .padding(0.2);\n            svg.append(\"g\")\n              .attr(\"class\", \"x-axis\")\n              .attr(\"transform\", \"translate(0,\" + height + \")\")\n              .call(d3.axisBottom(x))\n              .selectAll(\"text\")\n                .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n                .style(\"text-anchor\", \"end\");\n\n            // Add Y axis\n            var y = d3.scaleLinear()\n              .domain([0, 1200])\n              .range([ height, 0]);\n\n            svg.append(\"g\")\n              .call(d3.axisLeft(y).ticks(4));\n\n            // Bars\n            svg.selectAll(\"mybar\")\n              .data(data)\n              .enter()\n              .append(\"rect\")\n                .attr(\"x\", function(d) { return x(d.x); })\n                .attr(\"y\", function(d) { return y(d.y); })\n                .attr(\"width\", x.bandwidth())\n                .attr(\"height\", function(d) { return height - y(d.y); })\n                .attr(\"fill\", \"#CCCCCC\")\n\n              if(highlightFlag){\n              svg.selectAll(\"highlightBar\")\n              .data(highlightData)\n              .enter()\n              .append(\"rect\")\n                .attr(\"x\", function(d) { return x(d.x); })\n                .attr(\"y\", function(d) { return y(d.y); })\n                .attr(\"width\", x.bandwidth())\n                .attr(\"height\", function(d) { return height - y(d.y); })\n                .attr(\"fill\", \"orange\")   \n            }\n \n\n            svg.append(\"g\")\n            .selectAll(\"g\")\n            .data(data)\n            .enter()\n            .append('text')\n            .attr(\"class\", \"tree-name\")\n            .attr(\"x\", function(d) { return x(d.x); })\n            .attr(\"y\", function(d) { return y(d.y); })\n            .attr(\"dx\", \"10\")\n            .attr(\"dy\", '-1')\n            .attr(\"text-anchor\", \"middle\")\n            .text(function(d){return d.y;\n            })\n            .attr('font-size', \"10px\")\n            .attr('fill', '#808080');\n              \n        })\n    },\n\n\n  }\n}\n",{"version":3,"sources":["OverviewPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA","file":"OverviewPanel.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"overview-panel-view\">\n    <div class=\"dataset-part\">\n      <span class=\"dataset-text\">Dataset</span>\n        <div class=\"dataset-select\">\n          <el-select v-model=\"selectValue\">\n            <el-option\n              v-for=\"item in options\"\n              :key=\"item.value\"\n              :label=\"item.value\"\n              :value=\"item.value\">\n            </el-option>\n          </el-select>\n      </div>\n      <i class=\"el-icon-circle-plus-outline\"></i>\n    </div>\n    <span class=\"projection-text\">Projection</span>\n    <div class=\"projection-part\" ref=\"projectionPanel\">\n        <svg id=\"projection-chart\" style=\"position: absolute; width: 100%; height: 100%;\">\n        </svg>\n    </div>\n    <span class=\"distribution-text\">Distribution</span>\n    <div class=\"distribution-part\">\n      <div class=\"distribution-div\" id=\"size\">\n        <svg id=\"bar-size\" style=\"width: 100%; height: 100%\"></svg>\n      </div>\n      <div class=\"distribution-div\" id=\"height\">\n        <svg id=\"bar-height\" style=\"width: 100%; height: 100%\"></svg>\n      </div>\n      <div class=\"distribution-div\" id=\"width\">\n        <svg id=\"bar-width\" style=\"width: 100%; height: 100%\"></svg>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport { mapState, mapMutations } from 'vuex';\n\n\nexport default {\n  name: 'OverviewPanel',\n  components: {\n\n  },\n  props: {\n\n  },\n  data() {\n    return {\n      frontPoint: null,\n      selectValue: \"Citation\",\n      options:[\n        {\n          value: \"Citation\"\n        },\n        {\n          value: \"Repost\"\n        }\n      ],\n      condition_data: null,\n\n      \n    }\n  },\n  beforeMount(){\n    this.condition_data = sysDatasetObj.getCondition()\n\n  },\n  mounted() {\n    this.width = this.$refs.projectionPanel.clientWidth\n    this.height = this.$refs.projectionPanel.clientHeight\n    this.draw_projection_chart()\n    this.draw_size_bar()\n    this.draw_height_bar()\n    this.draw_width_bar()\n    \n  },\n  watch: {\n      displayMode: function() {\n        console.log('displayMode')\n      },\n      visPanelState: function(){\n        d3.select('#bar-size-1').remove()\n        d3.select('#bar-height-1').remove()\n        d3.select('#bar-width-1').remove()\n        this.draw_size_bar()\n        this.draw_height_bar()\n        this.draw_width_bar()\n      }\n  },\n  computed: {\n    ...mapState([\n      'visPanelState'\n    ]),\n  },\n  created(){\n\n  },\n  methods: {\n    ...mapMutations([\n      'DATA_QUERY_INDEX'\n    ]),\n    test: function(){\n        var x = d3.scaleLinear()\n            .domain([0,1])\n            .range([0,500]);\n          var x2 = x.copy(); // reference.\n\n          var zoom = d3.zoom()\n            .scaleExtent([1, 10])\n            .on(\"zoom\", zoomed);\n\n          var svg = d3.select(\"svg\")\n            .call(zoom);\n            \n          var axis = d3.axisBottom().scale(x)\n            \n          var axisG = svg.append(\"g\")\n              .attr(\"transform\", \"translate(0,30)\")\n              .call(axis);\n            \n          function zoomed() {\n            x = d3.event.transform.rescaleX(x2)\n            axis.scale(x);\n            axisG.call(axis);\n          }\n    },\n    draw_projection_chart: function(){\n      let self = this\n      d3.csv('treeDataset/umap_GIN10_res.csv', d3.autoType)\n        .then(function(data) {\n          var margin = { top: 5, right: 5, bottom: 5, left: 5 },\n              width = self.$refs.projectionPanel.clientWidth - margin.left - margin.right,\n              height = self.$refs.projectionPanel.clientHeight - margin.top - margin.bottom;\n\n          var x = d3.scaleLinear()\n            .range([0, width]).nice();\n          var y = d3.scaleLinear()\n            .range([height, 0]).nice();\n          \n\n          var xMax = d3.max(data, function(d) { return d['x']; }) * 1.05,\n              xMin = d3.min(data, function(d) { return d['x']; }),\n              xMin = xMin > 0 ? 0 : xMin,\n              yMax = d3.max(data, function(d) { return d['y']; }) * 1.05,\n              yMin = d3.min(data, function(d) { return d['y']; }),\n              yMin = yMin > 0 ? 0 : yMin;\n          x.domain([xMin-2, xMax+2]);\n          y.domain([yMin-2, yMax+1]);\n\n          var xAxis = d3.axisBottom()\n              .scale(x)\n              .ticks(8)\n              .tickSize(-height);\n\n          var yAxis = d3.axisLeft()\n              .scale(y)\n              .ticks(8)\n              .tickSize(-width);\n\n\n          var zoomBeh = d3.zoom()\n            .scaleExtent([0, 50])\n            .on(\"zoom\", zoom);\n          \n          var svg = d3.select(self.$el).select('#projection-chart')\n            .append(\"g\")\n            .attr('id', 'distribute-chart')\n            .attr(\"transform\", \"translate(5, 5)\")\n            .call(zoomBeh);\n          \n          svg.append(\"rect\")\n            .attr(\"class\", \"overview-rect\")\n            .attr(\"width\", width)\n            .attr(\"height\", height);\n          \n          var xAxisG = svg.append(\"g\")\n            .classed(\"x axis\", true)\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis)\n          \n          var yAxisG = svg.append(\"g\")\n            .classed(\"y axis\", true)\n            .call(yAxis)\n          \n          var objects = svg.append(\"svg\")\n            .attr(\"class\", \"overview-svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height);\n\n          objects.append(\"svg:line\")\n              .classed(\"axisLine hAxisLine\", true)\n              .attr(\"x1\", 0)\n              .attr(\"y1\", 0)\n              .attr(\"x2\", width)\n              .attr(\"y2\", 0)\n              .attr(\"transform\", \"translate(0,\" + height + \")\");\n          \n          objects.append(\"svg:line\")\n            .classed(\"axisLine vAxisLine\", true)\n            .attr(\"x1\", 0)\n            .attr(\"y1\", 0)\n            .attr(\"x2\", 0)\n            .attr(\"y2\", height);\n          \n          var rMax = d3.max(data, function(d) { return d['n']; }),\n            rMin = d3.min(data, function(d) { return d['n']; });\n\n          let logScale = d3.scaleLog()\n            .domain([rMin, rMax])\n            .range([3, 10]);\n\n          objects.selectAll(\".dot\")\n            .data(data)\n          .enter()\n          .append(\"circle\")\n            .attr(\"class\",\"dot\")\n            .attr(\"id\", function(d) { return \"dot\"+parseInt(d['m'])})\n            .classed(\"dot-selected\", false)\n            .classed(\"dot-highlighted\", false)\n            .attr(\"transform\", transform)\n            .attr(\"m\", function(d) {return d['m']})\n            .attr(\"r\", function(d){\n              return logScale(d['n']);\n            })\n            .on('click', function(){\n                self.DATA_QUERY_INDEX(parseInt(this.getAttribute(\"m\")))\n            });\n          \n          function zoom() {\n            let transformEvent = d3.event.transform\n            svg.selectAll(\".dot\")\n                .attr(\"transform\", d => transform(d, transformEvent));\n          }\n\n          function transform(d, transformEvent) {\n            let poxList = [x(d['x']), y(d['y'])]\n            if (typeof(transformEvent) !== 'object') {\n              return \"translate(\" + poxList[0] + \",\" + poxList[1] + \")\";\n            }\n            let posListUpdate = transformEvent.apply(poxList)\n            return \"translate(\" + posListUpdate[0] + \",\" + posListUpdate[1] + \")\";\n          }\n        })\n\n    },\n    draw_size_bar: function(){\n      var self = this\n      d3.csv('treeDataset/size.csv', d3.autoType)\n        .then(function(data) {\n            var margin = {top: 10, right: 10, bottom: 50, left: 35},\n              width = document.getElementById(\"bar-size\").clientWidth - margin.left - margin.right,\n              height = document.getElementById(\"bar-size\").clientHeight - margin.top - margin.bottom;\n\n            var highlightData = sysDatasetObj.gethighlightBar()\n            var highlightFlag = false\n            if('size' in highlightData){\n              highlightData = highlightData['size']\n              highlightFlag = true\n            }\n\n\n            var svg = d3.select(self.$el).select(\"#bar-size\")\n                .append(\"g\")\n                .attr(\"id\", 'bar-size-1')\n                .attr(\"transform\",\n                      \"translate(\" + margin.left + \", \" +  margin.right + \")\");\n            \n            svg.append(\"text\")\n              .style(\"text-anchor\", \"middle\")\n              .attr(\"x\", width-20)\n              .attr(\"y\", 12)\n              .attr(\"font-size\", \"15px\")\n              .attr(\"font-weight\", \"bolder\")\n              .attr(\"fill\", \"#666666\")\n              .text(\"Size\");\n\n            var x = d3.scaleBand()\n              .range([ 0, width ])\n              .domain(data.map(function(d) { return d.x; }))\n              .padding(0.2);\n            svg.append(\"g\")\n              .attr(\"class\", \"x-axis\")\n              .attr(\"transform\", \"translate(0,\" + height + \")\")\n              .call(d3.axisBottom(x))\n              .selectAll(\"text\")\n                .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n                .style(\"text-anchor\", \"end\");\n\n            // Add Y axis\n            var y = d3.scaleLinear()\n              .domain([0, 1200])\n              .range([ height, 0]);\n\n            svg.append(\"g\")\n              .call(d3.axisLeft(y).ticks(4));\n\n            // Bars\n            svg.selectAll(\"mybar\")\n              .data(data)\n              .enter()\n              .append(\"rect\")\n                .attr(\"x\", function(d) { return x(d.x); })\n                .attr(\"y\", function(d) { return y(d.y); })\n                .attr(\"width\", x.bandwidth())\n                .attr(\"height\", function(d) { return height - y(d.y); })\n                .attr(\"fill\", \"#CCCCCC\")   \n\n            if(highlightFlag){\n              svg.selectAll(\"highlightBar\")\n              .data(highlightData)\n              .enter()\n              .append(\"rect\")\n                .attr(\"x\", function(d) { return x(d.x); })\n                .attr(\"y\", function(d) { return y(d.y); })\n                .attr(\"width\", x.bandwidth())\n                .attr(\"height\", function(d) { return height - y(d.y); })\n                .attr(\"fill\", \"orange\")   \n            }\n\n\n            svg.append(\"g\")\n            .selectAll(\"g\")\n            .data(data)\n            .enter()\n            .append('text')\n            .attr(\"class\", \"tree-name\")\n            .attr(\"x\", function(d) { return x(d.x); })\n            .attr(\"y\", function(d) { return y(d.y); })\n            .attr(\"dx\", \"10\")\n            .attr(\"dy\", '-1')\n            .attr(\"text-anchor\", \"middle\")\n            .text(function(d){return d.y;\n            })\n            .attr('font-size', \"10px\")\n            .attr('fill', '#808080');\n              \n        })\n    },\n    draw_height_bar: function(){\n      var self = this\n      d3.csv('treeDataset/height.csv', d3.autoType)\n        .then(function(data) {\n            var margin = {top: 10, right: 10, bottom: 50, left: 35},\n              width = document.getElementById(\"bar-height\").clientWidth - margin.left - margin.right,\n              height = document.getElementById(\"bar-height\").clientHeight - margin.top - margin.bottom;\n\n            // append the svg object to the body of the page\n            var svg = d3.select(self.$el).select(\"#bar-height\")\n                .append(\"g\")\n                .attr(\"id\", 'bar-height-1')\n                .attr(\"transform\",\n                      \"translate(\" + margin.left + \", \" +  margin.right + \")\");\n\n            var highlightData = sysDatasetObj.gethighlightBar()\n            var highlightFlag = false\n            if('height' in highlightData){\n              highlightData = highlightData['height']\n              highlightFlag = true\n            }\n            \n            svg.append(\"text\")\n              .style(\"text-anchor\", \"middle\")\n              .attr(\"x\", width-20)\n              .attr(\"y\", 12)\n              .attr(\"font-size\", \"15px\")\n              .attr(\"font-weight\", \"bolder\")\n              .attr(\"fill\", \"#666666\")\n              .text(\"Height\");\n\n            var x = d3.scaleBand()\n              .range([ 0, width ])\n              .domain(data.map(function(d) { return d.x; }))\n              .padding(0.2);\n            svg.append(\"g\")\n              .attr(\"class\", \"x-axis\")\n              .attr(\"transform\", \"translate(0,\" + height + \")\")\n              .call(d3.axisBottom(x))\n              .selectAll(\"text\")\n                .attr(\"transform\", \"translate(0,0)\")\n                .style(\"text-anchor\", \"middle\");\n\n            // Add Y axis\n            var y = d3.scaleLinear()\n              .domain([0, 1200])\n              .range([ height, 0]);\n\n            svg.append(\"g\")\n              .call(d3.axisLeft(y).ticks(4));\n\n            // Bars\n            svg.selectAll(\"mybar\")\n              .data(data)\n              .enter()\n              .append(\"rect\")\n                .attr(\"x\", function(d) { return x(d.x); })\n                .attr(\"y\", function(d) { return y(d.y); })\n                .attr(\"width\", x.bandwidth())\n                .attr(\"height\", function(d) { return height - y(d.y); })\n                .attr(\"fill\", \"#CCCCCC\")\n            \n            if(highlightFlag){\n              svg.selectAll(\"highlightBar\")\n              .data(highlightData)\n              .enter()\n              .append(\"rect\")\n                .attr(\"x\", function(d) { return x(d.x); })\n                .attr(\"y\", function(d) { return y(d.y); })\n                .attr(\"width\", x.bandwidth())\n                .attr(\"height\", function(d) { return height - y(d.y); })\n                .attr(\"fill\", \"orange\")   \n            }\n\n            svg.append(\"g\")\n            .selectAll(\"g\")\n            .data(data)\n            .enter()\n            .append('text')\n            .attr(\"class\", \"tree-name\")\n            .attr(\"x\", function(d) { return x(d.x); })\n            .attr(\"y\", function(d) { return y(d.y); })\n            .attr(\"dx\", \"10\")\n            .attr(\"dy\", '-1')\n            .attr(\"text-anchor\", \"middle\")\n            .text(function(d){return d.y;\n            })\n            .attr('font-size', \"10px\")\n            .attr('fill', '#808080');\n              \n        })\n    },\n    draw_width_bar: function(){\n      var self = this\n      d3.csv('treeDataset/width.csv', d3.autoType)\n        .then(function(data) {\n            var margin = {top: 10, right: 10, bottom: 50, left: 35},\n              width = document.getElementById(\"bar-width\").clientWidth - margin.left - margin.right,\n              height = document.getElementById(\"bar-width\").clientHeight - margin.top - margin.bottom;\n\n            // append the svg object to the body of the page\n            var svg = d3.select(self.$el).select(\"#bar-width\")\n                .append(\"g\")\n                .attr(\"id\", 'bar-width-1')\n                .attr(\"transform\",\n                      \"translate(\" + margin.left + \", \" +  margin.right + \")\");\n            \n            var highlightData = sysDatasetObj.gethighlightBar()\n            var highlightFlag = false\n            if('width' in highlightData){\n              highlightData = highlightData['width']\n              highlightFlag = true\n            }\n\n            svg.append(\"text\")\n              .style(\"text-anchor\", \"middle\")\n              .attr(\"x\", width-20)\n              .attr(\"y\", 12)\n              .attr(\"font-size\", \"15px\")\n              .attr(\"font-weight\", \"bolder\")\n              .attr(\"fill\", \"#666666\")\n              .text(\"Width\");\n\n            var x = d3.scaleBand()\n              .range([ 0, width ])\n              .domain(data.map(function(d) { return d.x; }))\n              .padding(0.2);\n            svg.append(\"g\")\n              .attr(\"class\", \"x-axis\")\n              .attr(\"transform\", \"translate(0,\" + height + \")\")\n              .call(d3.axisBottom(x))\n              .selectAll(\"text\")\n                .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n                .style(\"text-anchor\", \"end\");\n\n            // Add Y axis\n            var y = d3.scaleLinear()\n              .domain([0, 1200])\n              .range([ height, 0]);\n\n            svg.append(\"g\")\n              .call(d3.axisLeft(y).ticks(4));\n\n            // Bars\n            svg.selectAll(\"mybar\")\n              .data(data)\n              .enter()\n              .append(\"rect\")\n                .attr(\"x\", function(d) { return x(d.x); })\n                .attr(\"y\", function(d) { return y(d.y); })\n                .attr(\"width\", x.bandwidth())\n                .attr(\"height\", function(d) { return height - y(d.y); })\n                .attr(\"fill\", \"#CCCCCC\")\n\n              if(highlightFlag){\n              svg.selectAll(\"highlightBar\")\n              .data(highlightData)\n              .enter()\n              .append(\"rect\")\n                .attr(\"x\", function(d) { return x(d.x); })\n                .attr(\"y\", function(d) { return y(d.y); })\n                .attr(\"width\", x.bandwidth())\n                .attr(\"height\", function(d) { return height - y(d.y); })\n                .attr(\"fill\", \"orange\")   \n            }\n \n\n            svg.append(\"g\")\n            .selectAll(\"g\")\n            .data(data)\n            .enter()\n            .append('text')\n            .attr(\"class\", \"tree-name\")\n            .attr(\"x\", function(d) { return x(d.x); })\n            .attr(\"y\", function(d) { return y(d.y); })\n            .attr(\"dx\", \"10\")\n            .attr(\"dy\", '-1')\n            .attr(\"text-anchor\", \"middle\")\n            .text(function(d){return d.y;\n            })\n            .attr('font-size', \"10px\")\n            .attr('fill', '#808080');\n              \n        })\n    },\n\n\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"less\">\n.overview-panel-view {\n  position: absolute;\n  top: 0%;\n  left: 0%;\n  right: 0%;\n  bottom: 0%;\n  .dataset-part{\n    position:absolute;\n    top: 1%;\n    bottom: 90%;\n    left: 0%;\n    right: 0%;\n    .dataset-text{\n      position:absolute;\n      top: 6%;\n      left: 5%;\n      font-size: 1rem;\n      font-weight: bolder;\n      color: black;\n    }\n    .dataset-select{\n      position:absolute;\n      top: 3%;\n      left: 30%;\n    }\n    .el-icon-circle-plus-outline{\n      position:absolute;\n      top: 12%;\n      left: 83%;\n    }\n  }\n  .projection-text{\n      position:absolute;\n      top: 6%;\n      left: 5%;\n      font-size: 1rem;\n      font-weight: bolder;\n      color: black;\n  }\n  .projection-part{\n    position: absolute;\n    top: 8%;\n    bottom: 60%;\n    left: 0%;\n    right: 0%;\n  }\n  .distribution-text{\n      position:absolute;\n      top: 40%;\n      left: 5%;\n      font-size: 1rem;\n      font-weight: bolder;\n      color: black;\n  }\n  .distribution-part{\n    position: absolute;\n    top: 43%;\n    bottom: 2%;\n    left: 0%;\n    right: 0%;\n    #size{\n    .size-input1{\n        position: absolute;\n        top: 1%;\n        left: 70%;\n        width: 10%;\n        border: 1px solid #bfc2c8 !important;\n        border-radius: 2px;\n        color: #606266;\n    }\n    .size-connect{\n        position: absolute;\n        top: 0%;\n        left: 81.5%;\n        font-size: 1.5rem;\n        font-weight: 200;\n        text-anchor: middle;\n        color: #606266;\n    }\n    .size-input2{\n        position: absolute;\n        top: 1%;\n        left: 87%;\n        width: 10%;\n        border: 1px solid #bfc2c8 !important;\n        border-radius: 2px;\n        color: #606266;\n    }\n  }\n  #height{\n    .height-input1{\n        position: absolute;\n        top: 36%;\n        left: 70%;\n        width: 10%;\n        border: 1px solid #bfc2c8 !important;\n        border-radius: 2px;\n        color: #606266;\n    }\n    .height-connect{\n        position: absolute;\n        top: 35%;\n        left: 81.5%;\n        font-size: 1.5rem;\n        font-weight: 200;\n        text-anchor: middle;\n        color: #606266;\n    }\n    .height-input2{\n        position: absolute;\n        top: 36%;\n        left: 87%;\n        width: 10%;\n        border: 1px solid #bfc2c8 !important;\n        border-radius: 2px;\n        color: #606266;\n    }\n  }\n  #width{\n    .width-input1{\n        position: absolute;\n        top: 70%;\n        left: 70%;\n        width: 10%;\n        border: 1px solid #bfc2c8 !important;\n        border-radius: 2px;\n        color: #606266;\n    }\n    .width-connect{\n        position: absolute;\n        top: 69%;\n        left: 81.5%;\n        font-size: 1.5rem;\n        font-weight: 200;\n        text-anchor: middle;\n        color: #606266;\n    }\n    .width-input2{\n        position: absolute;\n        top: 70%;\n        left: 87%;\n        width: 10%;\n        border: 1px solid #bfc2c8 !important;\n        border-radius: 2px;\n        color: #606266;\n    }\n  }\n  }\n}\n\n</style>\n<style scoped lang=\"less\">\n  /deep/.el-input__inner{  \n    height: 30px;   \n    width: 150px;\n  }\n\n</style>\n<style lang=\"less\">\n\n.overview-rect {\n  fill: transparent;\n  shape-rendering: crispEdges;\n}\n\n.axis path,\n.axis line {\n  fill: none;\n  stroke: rgba(0, 0, 0, 0.1);\n  shape-rendering: crispEdges;\n}\n\n.axisLine {\n  fill: none;\n  shape-rendering: crispEdges;\n  stroke: rgba(0, 0, 0, 0.5);\n  stroke-width: 2px;\n}\n\n.dot {\n  fill: steelblue;\n  stroke: white;\n  stroke-width: 1px;\n  fill-opacity: 0.8;\n  &.dot-selected{\n    fill: orange !important;\n    fill-opacity: 1 !important;\n  }\n  &.dot-highlighted{\n    fill: red !important;\n    fill-opacity: 1 !important;\n  }\n}\n\n.d3-tip {\n  line-height: 1;\n  font-weight: bold;\n  padding: 12px;\n  background: rgba(0, 0, 0, 0.8);\n  color: #fff;\n  border-radius: 2px;\n}\n\n/* Creates a small triangle extender for the tooltip */\n.d3-tip:after {\n  box-sizing: border-box;\n  display: inline;\n  font-size: 10px;\n  width: 100%;\n  line-height: 1;\n  color: rgba(0, 0, 0, 0.8);\n  content: \"\\25BC\";\n  position: absolute;\n  text-align: center;\n}\n\n/* Style northward tooltips differently */\n.d3-tip.n:after {\n  margin: -1px 0 0 0;\n  top: 100%;\n  left: 0;\n}\n.x.axis text{\n  opacity: 0;\n  font-size: 0;\n}\n.y.axis text{\n  opacity: 0;\n  font-size: 0;\n}\n.axisLine{\n  opacity: 0;\n}\n</style>>"]}]}